#!/bin/bash

#
# IMPORTANT: this script is meant to be run inside the Kafka container.
#
# Pay attention to the fact that there are 3 messages, 2 of which have the same key.
# This is to demonstrate that messages with idempotency keys duplicated are handled
# properly and the client doesn't receive the same notification more than once.
#

cat << EOF | kafka-console-producer.sh \
    --bootstrap-server kafka:9092 \
    --topic notifications \
    --property "parse.key=true" --property "key.separator=:" \
    --producer-property "security.protocol=SASL_PLAINTEXT" \
    --producer-property "sasl.mechanism=SCRAM-SHA-512" \
    --producer-property "sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username=\"tonevents\" password=\"tonevents\";"
key-01:4684e98f0b6562f8699a1bfe51f4228bd832864efebb02b278d2249eda8ab3ab ARF3HtRiHBKogvE11hK1lsQsvbUBP3zi bixBruYNdE1tanFu2Cv144DOvtjHsaeZZVnonsuW7IH0K693EpRvN5e9bIKV62/06rIZMCdL6+6T7V95bZF7h84h8JiR3poJF/lHvjCj9VOYXhBqnT38fKoUPiBKMyLlPYuYLilwQSP++0QeKcLOLlbFOqyKQYn+7EtPS/4TG5PbRw9BrauKy1sDNOHQ7OIKxUa35l97F6XXK6kS60nqgCvpZBkSOuS3/CIQhQpK4aH9OILMD9cJIDG0MCWPsGinetiewLugrien3vuMP4R0KduJekcfgSS81RkSUiBHX4yF9cZaLCHJAtblM2G12vYqUtfUssUzgR1/0OjHWSsGz76QHzf7NW7zb0L0JH3NfYQDQCIQIl2SwVox6ZWvb6SoMPfYi3V8sA28SSv+OLGGxFRJkXs7LxFuWPaUJE735Q3StkqvaL//M3aw5+/FNS32nBTwwiGtyBiWvANPeXrUUzdBOKpBaENlKqb7utYcUC87HQNoKP8q6S0uRywNcYQvY9drdl2EVkBS2lYePO1sOLQtVLUxFpSm5RYN1tg1bCohvIG2RY1RFE4vlzImjgYr7uSqTi8wANsG1D6A6WGRymusUg+cD/lrDo7t99TUjUIZzsmWQyThdRH5JsBp5XI8W3JMifYapzEOCuWyn+F/lMOsReIUtjyy5I2AL5VmKOK+vwKcPE3cvg25btZ9NzFqp+skLNLVu5+1scLTxyrseM2LbhrPCNssGy3lDbi/hQlIaCRwij80J7uhlsdD9vw1aPHpCVxrPfv+Q0xrCVdv/cwq9+xPGwyFtHDsibIE1m5WYsrZpIAJ52GCmhonScpc8kq/gIHYB6g9QSWqW7zAp3AVJ3vDVneThJzae8DWmA9MFQGVDvjqgXiBZyohOAFvUHBncfktUqgSdQ051Dn2kpWdUE/T+/yJhiOqKxi75TYC1gdujOPqtJLQbthXhYedVT3i/g==
key-02:4684e98f0b6562f8699a1bfe51f4228bd832864efebb02b278d2249eda8ab3ab 5Xz4E71UbyLiNpF4w91geARa9+bH2Skh qNaZSSKLsmC/c7psux8ctOMK8zuMfQ0Tyj6ntZaFpnPFUJcSrdNaZt5obo75yUOFAB8vMcAasyrB8/7I3dDXSj22ekvVJghTr7RwAdwcWwo3ArrTBBMF8fMo3aVFEU5Ka60LDF2bdteF4rmvFIGd0O61VwOSMmuQXq0i9SXK/9p7W6uIUzYwtQwqhI4OkywFl2WL98Wn9Lo5UxGDAokIxVYSOKyN0TM/3XJXH47a19U0ZrTnUoFMVfI2AyXbsZ3D/YMFQuC3GvphDFwHGGyPVuSlvDIsKSzTk8NIZnKBL51X2vHhmRO83VoqIeMfHj8YzFVYzfCw6m8nnEhTahyi0G/4xwN9LX391B235tFEgI4P9XW0MZ+4l+uMOsdcTiXleW45D5+kU3PQKhFUuhczQovTSo808Rc8XYX/H2Fz+aUrCWmLxJqjfSlMSUMy4P7fnHv4OXcXgGM0YoDdDEFEIg5Ach1zGDp1wlBx0PDG22swSayAInM4abz0aa98VdGcM9ClHoj3rUymoPFrUMjnOQXvt6Yea1xmCahRTHgnVTm/fqmDte9r+71NxdJa0aU4uC9ii0jTFwtCfwpUpLWwSH0fY0sRbEneSphLIRaAXv35VUdicJt65RDbncOBLDIg+dE7Md3N4lOk+JMqt6p3HY7D6HcaDbuxRGIWREQp7T4sSxGgfUbfChudixxpmbDwqbeiwUFllyDdSgElSciRBq0z9/F2lZ1KV7Y0ycndg25wbZ5GXQ1k39K3KvSLVViqeslFnjqh/2Cp+BbPayXCcSrZ9BGN8+TB0cgZP7JFmiNrLrQhqPy7Gw4Y+Wv4K9INXV0aHLY+oEc2gJxpSbSZdrR907VG6Awhhw5jgL6Z82Tog2nPzHSuuaJl8/FCtJz9t6zht+2nBBYm9nldUPq8TniyJ4AF8cxfHAYjkK1t6Qj/N6ej8IZzrS+p52oh9R+eOpx7Yg==
key-02:4684e98f0b6562f8699a1bfe51f4228bd832864efebb02b278d2249eda8ab3ab 5Xz4E71UbyLiNpF4w91geARa9+bH2Skh qNaZSSKLsmC/c7psux8ctOMK8zuMfQ0Tyj6ntZaFpnPFUJcSrdNaZt5obo75yUOFAB8vMcAasyrB8/7I3dDXSj22ekvVJghTr7RwAdwcWwo3ArrTBBMF8fMo3aVFEU5Ka60LDF2bdteF4rmvFIGd0O61VwOSMmuQXq0i9SXK/9p7W6uIUzYwtQwqhI4OkywFl2WL98Wn9Lo5UxGDAokIxVYSOKyN0TM/3XJXH47a19U0ZrTnUoFMVfI2AyXbsZ3D/YMFQuC3GvphDFwHGGyPVuSlvDIsKSzTk8NIZnKBL51X2vHhmRO83VoqIeMfHj8YzFVYzfCw6m8nnEhTahyi0G/4xwN9LX391B235tFEgI4P9XW0MZ+4l+uMOsdcTiXleW45D5+kU3PQKhFUuhczQovTSo808Rc8XYX/H2Fz+aUrCWmLxJqjfSlMSUMy4P7fnHv4OXcXgGM0YoDdDEFEIg5Ach1zGDp1wlBx0PDG22swSayAInM4abz0aa98VdGcM9ClHoj3rUymoPFrUMjnOQXvt6Yea1xmCahRTHgnVTm/fqmDte9r+71NxdJa0aU4uC9ii0jTFwtCfwpUpLWwSH0fY0sRbEneSphLIRaAXv35VUdicJt65RDbncOBLDIg+dE7Md3N4lOk+JMqt6p3HY7D6HcaDbuxRGIWREQp7T4sSxGgfUbfChudixxpmbDwqbeiwUFllyDdSgElSciRBq0z9/F2lZ1KV7Y0ycndg25wbZ5GXQ1k39K3KvSLVViqeslFnjqh/2Cp+BbPayXCcSrZ9BGN8+TB0cgZP7JFmiNrLrQhqPy7Gw4Y+Wv4K9INXV0aHLY+oEc2gJxpSbSZdrR907VG6Awhhw5jgL6Z82Tog2nPzHSuuaJl8/FCtJz9t6zht+2nBBYm9nldUPq8TniyJ4AF8cxfHAYjkK1t6Qj/N6ej8IZzrS+p52oh9R+eOpx7Yg==
EOF
